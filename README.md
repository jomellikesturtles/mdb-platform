# MDB Platform

Distributed application of mdb running across multiple Docker containers.

## Getting started

Download [Docker Desktop](https://www.docker.com/products/docker-desktop) for Mac or Windows. [Docker Compose](https://docs.docker.com/compose) will be automatically installed. On Linux, make sure you have the latest version of [Compose](https://docs.docker.com/compose/install/).

This solution uses Java Spring, Angular, ReactJS, Python, Node.js, with Redis for messaging and Postgres for storage.

### Prerequisites

- Docker & Docker Compose
- Git

Run in this directory to build and run the app:

```shell
docker compose up
```

The `mdb-web-app` app will be running at [http://localhost:4001](http://localhost:4001), and the `admin-web-app` will be at [http://localhost:4002](http://localhost:4002).

## Architecture

![Architecture](Gemini_Generated_Image_b8mrddb8mrddb8mr-1.png)
Image was generated by Gemini Nano Banana but is accurate.

- [mdb-web-app](https://github.com/jomellikesturtles/mdb-electron) frontend application written in Angular [http://localhost:4001](http://localhost:4001)
- [mdb-admin-web-app](https://github.com/jomellikesturtles/mdb-admin-web-app) in React.js. An internal tool. [http://localhost:4002](http://localhost:4002)
- [mdb-bff-service](https://github.com/jomellikesturtles/mdb-api) (mdb-api) in Spring
- [mdb-admin-bff-service](https://github.com/jomellikesturtles/mdb-admin-bff-service) in Spring
- [media-data-gateway-service](https://github.com/jomellikesturtles/media-data-gateway-service) in Spring which is the adapter service
- [user-data-gateway-service](https://github.com/jomellikesturtles/user-data-gateway-service) in Spring which is the adapter service
- Postgres the RDBMS which stores data.
- Redis which caches between BFFs and gateway services.
- [mdb-crawler-service](https://github.com/jomellikesturtles/mdb-crawler-service) the crawler service. technology TBA
- [mdb-notification-service](https://github.com/jomellikesturtles/mdb-notification-service) notification service.
- [compute-engine-service](https://github.com/jomellikesturtles/compute-engine-service) service.

## Ports assignments

### Web-apps

| Name              | Tech                      | Port | Details            |
| ----------------- | ------------------------- | ---- | ------------------ |
| **Web-app**       | Angular, NodeJS, Electron | 4001 | frontend           |
| **Admin-web-app** | React                     | 4002 | for admin          |
| **Mdb-Overview**  | VanillaJS                 | 4003 | project's overview |

### API and BFF Layer

| Name                      | Tech    | Port | Details       |
| ------------------------- | ------- | ---- | ------------- |
| **mdb-bff**               | Angular | 5001 | bff for users |
| **mdb-admin-bff-service** | React   | 5002 | bff for admin |

### Domain Services

| Name                           | Tech   | Port | Details                                   |
| ------------------------------ | ------ | ---- | ----------------------------------------- |
| **user-data-gateway-service**  | Spring | 6001 | adapter/gateway service for user-data DB  |
| **media-data-gateway-service** | Spring | 6002 | adapter/gateway service for media info DB |

### Workers and Async Services

| Name                     | Tech   | Port | Details |
| ------------------------ | ------ | ---- | ------- |
| **crawler-service**      | Python | 7001 |         |
| **notification-service** | TBA    | 7002 |         |

 <!--                             | **link-health-checker-service** | TBA  | 7003    |     |
| **analytics-aggregation-worker** | TBA                             | 7004 |         |
| **media-processing-service**     | TBA                             | 7005 |         |
| **ai-batch-job-service**         | TBA                             | 7006 |         | -->

### Infrastructure and Databases

| Name            | Tech       | Port | Details |
| --------------- | ---------- | ---- | ------- |
| **db**          | PostgreSQL | 5433 |         |
| **api-gateway** | Traefik    | 8888 |         |
| **redis**       | Redis      | 6380 |         |

 <!--            | **config-server** | Redis | 6380    |     |
| **discovery**   | Redis             | 6380  |         |
| **monitoring**  | Redis             | 6380  |         |
| **kafka**       | Redis             | 6380  |         |
| **rabbit-mq**   | Redis             | 6380  |         |
| **redis**       | Redis             | 6380  |         | -->

## Notes

Codes are available for request.

## Roadmap

ðŸš€ **Phase 1: The MVP (Version 1.0)**

**Theme:** "The Walking Skeleton"

**Goal:** A user can log in and view media. An admin can manually manage media and users.

In this phase, we prove the **Infrastructure** works. We do _not_ implement the Crawler yet, as manual data entry, and the write-through 3rd party API, are sufficient to test the frontend and microservices connectivity.

| **Service / Component** | **Features Included in MVP**                                                                                                                                            |
| ----------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Infrastructure**      | mdb-platform (Docker Compose), Postgres.                                                                                                                                |
| **Media Gateway**       | **CRUD API** for Movies (Title, Description, Poster URL, Stream Link).                                                                                                  |
| **User Gateway**        | Basic user profile storage.                                                                                                                                             |
| **Admin Web App**       | **Manual Entry Dashboard:** Forms to create/edit movies.                                                                                                                |
| **Web App (User)**      | **Home Page:** Grid of all movies.<br> **Details Page:** Title, Poster, and a (dummy) "Play" button. <br> **Search** Basic SQL Search (LIKE %query%) via Media Gateway. |

### Message Topics

**Kafka Topics:**

- `crawl.failed` - Crawl failed alerts
- `system.deployed` - A version deployed notifications
- `system.maintenance` - Maintenance toggle event
<!-- - `goal.milestone.reached` - Goal achievement notifications
- `streak.milestone.reached` - Streak achievement events -->

**RabbitMQ Queues:**

- `review.events` - Transaction to threads updates
- `account.events` - Transaction to account updates

### IPC Channels

**Disk events**

- disk full

**OS events**

- app restore, minimize

**Scan events**

- scan start/stop/complete

**CRUDs**

- create save

**Stream events**

- stream link created

<!-- ## Testing -->

<!-- show test results here -->

<!-- ## Documentations
Architecture Overview
API Documentations
Roadmaps
Security
pgp
salt
https
jwt

Product Requirements -->

## Acknowledgements

- My mentors and managers along the way
- Former colleagues especially in UST and MITDC
- Dianna Ross and the Supremes, Philharmonic Orchcestra of University of the Philippines
- Herman GÃ¶ring, the planet Saturn and its rings
- My old colleague' project
- My partner
