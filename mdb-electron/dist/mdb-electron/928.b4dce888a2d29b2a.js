"use strict";(self.webpackChunkmdb_electron=self.webpackChunkmdb_electron||[]).push([[928],{7928:(F,o,r)=>{r.r(o),r.d(o,{LibraryModule:()=>I});var l=r(177),u=r(6523),c=r(2791),d=r(467),m=r(6573),h=r(1891),p=r(9762),t=r(4438),v=r(2389),y=r(5235);function f(s,a){1&s&&(t.j41(0,"div")(1,"h1",4),t.EFF(2,"No offline movies found."),t.k0s()())}function g(s,a){if(1&s){const i=t.RV6();t.j41(0,"div",8)(1,"h5",9),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.getMoreResults())}),t.EFF(2,"Load more results..."),t.k0s()()}}function L(s,a){if(1&s&&(t.j41(0,"div",5),t.nrm(1,"app-card-list",6),t.DNE(2,g,3,0,"div",7),t.k0s()),2&s){const i=t.XpG();t.R7$(),t.Y8G("movieList",i.moviesDisplayList)("cardWidth",i.cardWidth)("displayMode","movie-cards-display-grid")("listType",i.LIST_TYPE),t.R7$(),t.Y8G("ngIf",i.hasMoreResults)}}function b(s,a){1&s&&(t.j41(0,"div")(1,"label"),t.EFF(2,"No movies found, go to Preferences."),t.k0s(),t.j41(3,"h1"),t.EFF(4,"No movie libraries found :("),t.k0s(),t.j41(5,"h3"),t.EFF(6,"Houston, we have a problem."),t.k0s(),t.j41(7,"h4"),t.EFF(8,"Apollo 13"),t.k0s()())}const T=[{path:"",component:(()=>{class s{constructor(i,e){this.ipcService=i,this.userDataService=e,this.moviesDisplayList=[],this.hasSearchResults=!1,this.cardWidth="130px",this.isFetchingData=!1,this.orderBy="tmdbId",this.lastVal=0,this.hasResults=!1,this.hasMoreResults=!1,this.LIST_TYPE=h.EO.Library}ngOnInit(){console.log("ngOnInit"),this.getMoviesFromLibrary()}minimizeMoviePoster(i){const e=new RegExp(h.qt,"gi");return i.replace(e,"SX150.jpg")}getMoviesFromLibrary(){var i=this;return(0,d.A)(function*(){const e=yield i.userDataService.getUserDataFirstPage(i.LIST_TYPE);console.log(e);const n=e.results;n.length&&(i.moviesDisplayList=n,i.lastVal=n[n.length-1][i.LIST_TYPE][i.orderBy],i.hasResults=!0,20===n.length&&(i.hasMoreResults=!0))})()}getMoreResults(){var i=this;return(0,d.A)(function*(){const e=yield i.userDataService.getUserDataPagination(i.LIST_TYPE,i.lastVal);console.log(e),e.length&&(i.moviesDisplayList.push.apply(i.moviesDisplayList,e),i.lastVal=e[e.length-1][i.LIST_TYPE][i.orderBy],e.length<20&&(i.hasMoreResults=!1))})()}onScanLibrary(){this.ipcService.startScanLibrary()}static{this.\u0275fac=function(e){return new(e||s)(t.rXU(p.Uj),t.rXU(m.J))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-library"]],inputs:{data:"data"},decls:8,vars:3,consts:[[1,"container-fluid"],[1,"btn","btn-info",3,"click"],[4,"ngIf"],["class","movie-cards-display-grid",4,"ngIf"],[1,"jumbo-message"],[1,"movie-cards-display-grid"],[3,"movieList","cardWidth","displayMode","listType"],["style","width: 100%; text-align: center; height: 80px; background-color: antiquewhite;",4,"ngIf"],[2,"width","100%","text-align","center","height","80px","background-color","antiquewhite"],[1,"text-hyperlink",3,"click"]],template:function(e,n){1&e&&(t.nrm(0,"app-selected-list"),t.j41(1,"div",0)(2,"button",1),t.bIt("click",function(){return n.onScanLibrary()}),t.EFF(3,"Scan library"),t.k0s(),t.DNE(4,f,3,0,"div",2)(5,L,3,5,"div",3),t.k0s(),t.j41(6,"div"),t.DNE(7,b,9,0,"div",2),t.k0s()),2&e&&(t.R7$(4),t.Y8G("ngIf",!n.hasResults),t.R7$(),t.Y8G("ngIf",n.hasResults),t.R7$(2),t.Y8G("ngIf",!n.moviesDisplayList))},dependencies:[l.bT,v.d,y.Y]})}}return s})()}];let E=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[c.iI.forChild(T),c.iI]})}}return s})(),I=(()=>{class s{static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[l.MD,u.G,E]})}}return s})()}}]);