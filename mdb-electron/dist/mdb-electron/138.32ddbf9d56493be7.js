"use strict";(self.webpackChunkmdb_electron=self.webpackChunkmdb_electron||[]).push([[138],{3138:(F,d,o)=>{o.r(d),o.d(d,{DiscoverModule:()=>$});var u=o(177),v=o(6523),l=o(2791),m=o(3426),a=o(4597),g=o(1413),c=o(6977),e=o(4438),f=o(8490),R=o(2389),y=o(5235),M=o(9183);function b(t,h){1&t&&(e.j41(0,"div")(1,"h1",2),e.EFF(2,"No movies found"),e.k0s()())}function T(t,h){if(1&t){const s=e.RV6();e.j41(0,"h5",7),e.bIt("click",function(){e.eBV(s);const r=e.XpG(2);return e.Njj(r.getMoreResults())}),e.EFF(1,"Load more results..."),e.k0s()}}function D(t,h){1&t&&e.nrm(0,"mat-spinner",8),2&t&&e.Y8G("diameter",50)}function C(t,h){if(1&t&&(e.j41(0,"div"),e.nrm(1,"app-card-list",3),e.j41(2,"div",4),e.DNE(3,T,2,0,"h5",5)(4,D,1,1,"mat-spinner",6),e.k0s()()),2&t){const s=e.XpG();e.R7$(),e.Y8G("movieList",s.discoverResults)("cardWidth",s.cardWidth)("displayMode","movie-cards-display-grid")("listType","none")("loading",s.loading),e.R7$(2),e.Y8G("ngIf",!s.procLoadMoreResults),e.R7$(),e.Y8G("ngIf",s.procLoadMoreResults)}}const G=[{path:"",component:(()=>{class t{constructor(s,i,r){this.dataService=s,this.movieService=i,this.activatedRoute=r,this.sortByList=["popularity.asc","popularity.desc","release_date.asc","release_date.desc","revenue.asc","revenue.desc","primary_release_date.asc","primary_release_date.desc","original_title.asc","original_title.desc","vote_average.asc","vote_average.desc","vote_count.asc","vote_count.desc"],this.sortByDefault="popularity.desc",this.sortBy="popularity.desc",this.discoverResults=[],this.discoverMoviesQuery="",this.currentPage=1,this.hasResults=!1,this.loading=!1,this.cardWidth="130px",this.discoverTitle="",this.hasMoreResults=!1,this.procLoadMoreResults=!1,this.paramMap=new Map,this.ngUnsubscribe=new g.B}ngOnInit(){console.log("queryparamsA snapshot:",this.activatedRoute.snapshot),console.log("queryparamsA :",this.activatedRoute),this.dataService.discoverQuery.pipe((0,c.Q)(this.ngUnsubscribe)).subscribe(s=>{this.discoverQuery(s.type,s.value,s.name,s.paramMap,s.name)})}ngOnDestroy(){console.log("destroy discover"),this.ngUnsubscribe.complete()}discoverQuery(s,i,r,I,U){let n="";switch(this.loading=!0,this.discoverResults=[],s){case"certification":this.paramMap.set(a.eq.Certification,i),n=`Top ${i} movies`;break;case"genre":this.paramMap.set(a.eq.WithGenres,i),n=`Top ${a.O9[i]} movies`;break;case"person":this.paramMap.set(a.eq.WithPeople,i),n=`Top movies with ${r}`;break;case"year":this.paramMap.set(a.eq.PrimaryReleaseYear,i),n=`Top movies from ${i}`;break;default:this.paramMap=I,n=U}this.movieService.getMoviesDiscover(this.paramMap).pipe((0,c.Q)(this.ngUnsubscribe)).subscribe(p=>{p.results.length>0&&(this.discoverResults.push(...p.results),this.hasResults=!0,this.discoverTitle=n,p.totalPages>this.currentPage&&(this.hasMoreResults=!0)),this.loading=!1},()=>{this.loading=!1})}changeSort(s){this.procLoadMoreResults=!0,this.paramMap.set(a.eq.SortBy,s),this.hasResults=!1,this.movieService.getMoviesDiscover(this.paramMap).pipe((0,c.Q)(this.ngUnsubscribe)).subscribe(i=>{this.discoverResults=i.results,this.hasResults=!0,this.procLoadMoreResults=!1})}getMoreResults(){this.procLoadMoreResults=!0,this.paramMap.set(a.eq.Page,++this.currentPage),this.movieService.getMoviesDiscover(this.paramMap).pipe((0,c.Q)(this.ngUnsubscribe)).subscribe(s=>{this.discoverResults=s.results,s.totalPages<=this.currentPage&&(this.hasMoreResults=!1),this.procLoadMoreResults=!1})}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(f.u),e.rXU(m.W),e.rXU(l.nX))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-discover"]],decls:6,vars:3,consts:[[1,"container-fluid"],[4,"ngIf"],[1,"jumbo-message"],[3,"movieList","cardWidth","displayMode","listType","loading"],[2,"width","100%","text-align","center","height","80px"],["class","text-hyperlink",3,"click",4,"ngIf"],["style","margin: auto;",3,"diameter",4,"ngIf"],[1,"text-hyperlink",3,"click"],[2,"margin","auto",3,"diameter"]],template:function(i,r){1&i&&(e.nrm(0,"app-selected-list"),e.j41(1,"div",0),e.DNE(2,b,3,0,"div",1),e.j41(3,"h1"),e.EFF(4),e.k0s(),e.DNE(5,C,5,7,"div",1),e.k0s()),2&i&&(e.R7$(2),e.Y8G("ngIf",!r.hasResults),e.R7$(2),e.JRh(r.discoverTitle),e.R7$(),e.Y8G("ngIf",r.hasResults||r.loading))},dependencies:[u.bT,R.d,y.Y,M.LG]})}}return t})()}];let j=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild(G),l.iI]})}}return t})();var L=o(9417);let $=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[u.MD,v.G,j,L.YN]})}}return t})()}}]);