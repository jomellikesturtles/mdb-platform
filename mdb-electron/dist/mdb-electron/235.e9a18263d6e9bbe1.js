"use strict";(self.webpackChunkmdb_electron=self.webpackChunkmdb_electron||[]).push([[235],{8497:(W,T,r)=>{r.d(T,{P:()=>m});var O=r(467),x=r(9762),M=r(4438);let e=(()=>{class h{constructor(){}static{this.\u0275fac=function(v){return new(v||h)}}static{this.\u0275prov=M.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})();var C=r(1891);let m=(()=>{class h extends e{constructor(u){super(),this.ipcService=u}openVideoStream(u){var v=this;return(0,O.A)(function*(){return v.ipcService.playOfflineVideo(u)})()}getMovieFromLibrary(u){return this.ipcService.getMovieFromLibrary(u)}getMoviesFromLibraryInList(u){return console.log("getting multiplevideos...",u),this.ipcService.getMoviesFromLibraryInList(u)}getLibraryPaginatedFirstPage(){return this.ipcService.getMultiplePaginatedFirst(C.EO.Library,C.Ix.TmdbId,20)}getLibraryPaginated(u){return console.log("getVideoPaginated...",u),this.ipcService.getMultiplePaginated(C.EO.Library,C.Ix.TmdbId,20,u)}static{this.\u0275fac=function(v){return new(v||h)(M.KVO(x.Uj))}}static{this.\u0275prov=M.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},1356:(W,T,r)=>{r.d(T,{W:()=>u});var O=r(4412),x=r(1413),M=r(1891),e=r(9762),C=r(6977),m=r(8141),h=r(4438),U=r(9211);let u=(()=>{class v{constructor(I,S){this.ipcService=I,this.loggerService=S,this.isGetTorrentFromMovieCard=!1,this.preferencesV2=new O.t(M.dx),this.ngUnsubscribe=new x.B,this.getPreferencesFromDb().pipe((0,C.Q)(this.ngUnsubscribe)).subscribe(E=>{this.loggerService.info(`this.ipcService.preferences  ${JSON.stringify(E)}`),this.preferencesV2.next(E)})}pullPreferences(){}getPreferences(){return this.preferencesV2||this.preferencesV2.next(M.dx),this.preferencesV2.value}getPreferencesFromDb(){return this.ipcService.getPreferences()}savePreferences(I){return this.ipcService.savePreferences(I).pipe((0,m.M)(S=>{this.preferencesV2.next(S)}))}resetPreferences(){return this.ipcService.savePreferences(M.dx).pipe((0,m.M)(I=>{this.preferencesV2.next(I)}))}static{this.\u0275fac=function(S){return new(S||v)(h.KVO(e.Uj),h.KVO(U.g))}}static{this.\u0275prov=h.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},6573:(W,T,r)=>{r.d(T,{J:()=>S});var O=r(467),x=r(8497),M=r(543),e=r(3426),C=r(8744),m=r(9762),h=r(2941),U=r(9824),u=r(7252),v=r(4438),R=r(8490),I=r(5649);let S=(()=>{class E{constructor(s,c,g,n,b,y,P,k,F){this.bookmarkService=s,this.movieService=c,this.playedService=g,this.libraryService=n,this.dataService=b,this.ipcService=y,this.httpUrlProvider=P,this.featureToggleService=k,this.httpBaseService=F}getUser(s){return this.featureToggleService.isEnabled("springMode")?this.dataService.getHandle(this.httpBaseService.get(this.httpUrlProvider.getBffAPI(U.sR.USER_ID,s)),this.ipcService.userData({subChannel:m.KS.ALL,operation:m.LG.FIND_ONE},null,{tmdbId:s})):this.ipcService.userData({subChannel:m.KS.ALL,operation:m.LG.FIND_ONE},null,{tmdbId:s})}updateUser(s,c){return this.featureToggleService.isEnabled("springMode")?this.dataService.postHandle(this.httpBaseService.post(this.httpUrlProvider.getBffAPI(U.sR.USER_ID,s),c),this.ipcService.userData({subChannel:m.KS.ALL,operation:m.LG.FIND_ONE},null,{tmdbId:s})):this.ipcService.userData({subChannel:m.KS.ALL,operation:m.LG.FIND_ONE},null,{tmdbId:s})}getUserDataFirstPage(s){var c=this;return(0,O.A)(function*(){console.log("get firstpage: ",s);let g=[];switch(s){case"bookmark":g=yield c.bookmarkService.getBookmarksPaginatedFirstPage();break;case"watched":g=yield c.playedService.getPlayedPaginatedFirstPage();break;case"library":g=yield c.libraryService.getLibraryPaginatedFirstPage()}return new Promise(function(){var n=(0,O.A)(function*(b,y){const P=yield c.getMovieListDetails(s,g);console.log("moviesList paginated:",P);let k=g;k.results=P,b(k)});return function(b,y){return n.apply(this,arguments)}}())})()}getUserDataPagination(s,c){var g=this;return(0,O.A)(function*(){console.log("get firstpage: ",s);let n=[];switch(s){case"bookmark":n=yield g.bookmarkService.getBookmarksPaginated(c);break;case"watched":n=yield g.playedService.getPlayedPaginated(c);break;case"library":n=yield g.libraryService.getLibraryPaginated(c)}return new Promise(function(){var b=(0,O.A)(function*(y,P){const k=yield g.getMovieListDetails(s,n);console.log("e:",k),y(k)});return function(y,P){return b.apply(this,arguments)}}())})()}commonSetter(s){return!("number"==typeof s&&s>=1)&&(!(!s||!s._id)||void 0)}getMovieListDetails(s,c){return new Promise(g=>{const n=[],b=c.results?c.results:c,y=b.length;let P=0;b.forEach(k=>{P++,k.tmdbId>0&&this.movieService.getMovieDetails(k.tmdbId,"videos,images,credits,similar,external_ids,recommendations").pipe().subscribe(F=>{const A=this.setDataObject(s,k);F[s]=A,n.push(F),y===P&&g(n)})})})}setDataObject(s,c){let g=null;const n=c,b=c.id?c.id:c._id;switch(s){case"bookmark":case"library":g={id:b,title:n.title,year:n.year,tmdbId:n.tmdbId};break;case"watched":const P={id:b,title:n.title,year:n.year,tmdbId:n.tmdbId};P.percentage=n.percentage?n.percentage:100,g=P}return g}static{this.\u0275fac=function(c){return new(c||E)(v.KVO(M.U),v.KVO(e.W),v.KVO(C.n),v.KVO(x.P),v.KVO(R.u),v.KVO(m.Uj),v.KVO(h.j),v.KVO(I.I),v.KVO(u.N))}}static{this.\u0275prov=v.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})()},5235:(W,T,r)=>{r.d(T,{Y:()=>oe});var O=r(8744);class x{static isEmpty(d){if(null==d)return!0;if(Array.isArray(d))return 0===d.length;switch(typeof d){case"object":return 0===Object.keys(d).length;case"string":return 0===d.length;case"number":return 0===d;default:return!1}}}var M=r(9566),e=r(4438),C=r(5649),m=r(177),h=r(467),U=r(6573),u=r(1356),v=r(3426),R=r(8089),I=r(1413),S=r(6977),E=r(1546),K=r(528),s=r(543),c=r(139),g=r(8490),n=r(2791),b=r(9211),y=r(9183),P=r(1699);const k=i=>({width:i}),F=(i,d)=>({height:i,"background-image":d});function A(i,d){if(1&i){const t=e.RV6();e.j41(0,"span",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleBookmark())}),e.k0s()}}function w(i,d){1&i&&(e.j41(0,"div"),e.nrm(1,"mat-spinner",15),e.k0s()),2&i&&(e.R7$(),e.Y8G("diameter",20))}function Y(i,d){1&i&&e.nrm(0,"div",16)}function V(i,d){if(1&i){const t=e.RV6();e.j41(0,"span",17),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFavorite())}),e.k0s()}}function X(i,d){1&i&&(e.j41(0,"div",18)(1,"span",19),e.EFF(2,"Loading..."),e.k0s()())}function $(i,d){if(1&i){const t=e.RV6();e.j41(0,"div",24),e.bIt("click",function(){e.eBV(t);const o=e.XpG(3);return e.Njj(o.togglePlayed())}),e.nrm(1,"img",25),e.k0s()}}function N(i,d){1&i&&(e.j41(0,"div"),e.nrm(1,"mat-spinner",15),e.k0s()),2&i&&(e.R7$(),e.Y8G("diameter",20))}function z(i,d){if(1&i&&(e.j41(0,"div",22),e.DNE(1,$,2,0,"div",23)(2,N,2,1,"div",4),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("ngIf",!t.procWatched),e.R7$(),e.Y8G("ngIf",t.procWatched)}}function H(i,d){if(1&i&&e.nrm(0,"div",26),2&i){const t=e.XpG(2);e.Y8G("ngStyle",e.eq3(1,k,t.watchedPercentage+"%"))}}function J(i,d){if(1&i&&e.DNE(0,z,3,2,"div",20)(1,H,1,3,"div",21),2&i){const t=e.XpG();e.Y8G("ngIf",!(null!=t._userData&&t._userData.played)),e.R7$(),e.Y8G("ngIf",null==t._userData?null:t._userData.played)}}let Q=(()=>{class i{set movie(t){this._movie=new E.m(t),this.preferencesService.isGetTorrentFromMovieCard&&this.movieService.getExternalId(this._movie.tmdbId).pipe((0,S.Q)(this.ngUnsubscribe)).subscribe(a=>{a&&a.imdb_id&&this.torrentService.getTorrents(a.imdb_id).pipe((0,S.Q)(this.ngUnsubscribe)).subscribe(o=>{})})}get movie(){return this._movie}set cardWidth(t){this._cardWidth=t}get cardWidth(){return this._cardWidth}set library(t){this._library=t}get library(){return this._library}set userData(t){this._userData=t,x.isEmpty(t)||t.played&&(this.watchedPercentage=t.played.percentage+"%")}get userData(){return this._userData}constructor(t,a,o,l,f,p,_,D,L,B,j,G){this.dataService=t,this.movieService=a,this.preferencesService=o,this.torrentService=l,this.userDataService=f,this.router=p,this.activatedRoute=_,this.bookmarkService=D,this.favoriteService=L,this.playedService=B,this.loggerService=j,this.featureToggleService=G,this._cardWidth="130px",this.isAdminMode=!1,this.isProcessingFavorite=!1,this.isProcessingBookmark=!1,this.procWatched=!1,this.procHighlight=!1,this.isWatched=!1,this._isBookmarked=!1,this._isFavorite=!1,this._isPlayed=!1,this.isAvailable=!1,this.watchedPercentage="0%",this.ngUnsubscribe=new I.B}ngOnInit(){}ngOnDestroy(){this.ngUnsubscribe.complete()}onHighlight(){this.procHighlight=!0,this.procHighlight=!1}onOpenMovie(){const t=this._movie.tmdbId;this.dataService.updateHighlightedMovie(t),this.router.navigate([`/details/${t}`],{relativeTo:this.activatedRoute})}onPreview(){this.isSingleClick=!0,setTimeout(()=>{this.isSingleClick&&this.dataService.updatePreviewMovie(this._movie)},300)}set isBookmarked(t){this.loggerService.info("set isBookmarked called"),this._isBookmarked=this.userDataService.commonSetter(t)}set isFavorite(t){this.loggerService.info("set isFavorite called"),this._isFavorite=this.userDataService.commonSetter(t)}set isPlayed(t){this.loggerService.info("set isPlayed called"),this._isPlayed=this.userDataService.commonSetter(t)}toggleBookmark(){var t=this;return(0,h.A)(function*(){t.isProcessingBookmark=!0;const a=t._movie.tmdbId;(t._isBookmarked?t.bookmarkService.remove("tmdbId",a):t.bookmarkService.save({tmdbId:a})).subscribe(l=>{t.isBookmarked=l.isBookmark,t.isProcessingBookmark=!1})})()}togglePlayed(){var t=this;return(0,h.A)(function*(){t.procWatched=!0;const a=t._movie.tmdbId;let o=!1;o=t._isPlayed?yield t.playedService.removePlayed("tmdbId",a).toPromise():yield t.playedService.savePlayed({tmdbId:a}).toPromise(),t.isPlayed=o,t.procWatched=!1})()}toggleFavorite(){this.isProcessingFavorite=!0;const t=this._movie.tmdbId;(this._isFavorite?this.favoriteService.remove("tmdbId",t):this.favoriteService.save({tmdbId:t})).subscribe(o=>{this.isFavorite=o.isFavorite,this.isProcessingFavorite=!1})}getYear(t){return K.A.getYear(t)}getPoster(t){return""}goToYear(t){this.dataService.updateDiscoverQuery({type:"year",value:t,name:null}),this.router.navigate(["/discover"],{relativeTo:this.activatedRoute,queryParams:{type:"year",year:t}})}isFeatureEnabled(t){return this.featureToggleService.isEnabled(t)}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(g.u),e.rXU(v.W),e.rXU(u.W),e.rXU(R._),e.rXU(U.J),e.rXU(n.Ix),e.rXU(n.nX),e.rXU(s.U),e.rXU(c.U),e.rXU(O.n),e.rXU(b.g),e.rXU(C.I))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-movie-card"]],inputs:{movie:"movie",cardWidth:"cardWidth",library:"library",userData:"userData"},decls:19,vars:23,consts:[[1,"movie-card",3,"ngStyle"],["data-toggle","tooltip",1,"movie-card-image-container",3,"ngStyle","title"],["data-toggle","tooltip","title","Toggle Bookmark",1,"card-button","movie-bookmark"],["class","card-button-icon bookmark-icon",3,"click",4,"ngIf"],[4,"ngIf"],["class","movie-available","data-toggle","tooltip","title","Available",4,"ngIf"],["data-toggle","tooltip","title","Toggle Favorite",1,"card-button","movie-mark-favorite"],["class","card-button-icon favorite-icon",3,"click",4,"ngIf"],["class","spinner-border spinner-border-sm","role","status",4,"ngIf"],[1,"overlay","overlay-add",3,"click"],[1,"card-body","movie-card-body"],[1,"movie-card-text"],["data-toggle","tooltip",1,"movie-card-title",3,"click","title"],[1,"movie-year",3,"click"],[1,"card-button-icon","bookmark-icon",3,"click"],[3,"diameter"],["data-toggle","tooltip","title","Available",1,"movie-available"],[1,"card-button-icon","favorite-icon",3,"click"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sr-only"],["class","card-button movie-mark-as-watched",4,"ngIf"],["id","watchedProgressBar","class","movie-progress-bar",3,"ngStyle",4,"ngIf"],[1,"card-button","movie-mark-as-watched"],[3,"click",4,"ngIf"],[3,"click"],["src","./assets/icons/check.svg","data-toggle","tooltip","title","Mark as watched",1,"card-button-icon"],["id","watchedProgressBar",1,"movie-progress-bar",3,"ngStyle"]],template:function(a,o){1&a&&(e.j41(0,"div",0)(1,"div",1),e.nI1(2,"releaseYear"),e.j41(3,"div",2),e.DNE(4,A,1,0,"span",3)(5,w,2,1,"div",4),e.k0s(),e.DNE(6,Y,1,0,"div",5),e.j41(7,"div",6),e.DNE(8,V,1,0,"span",7)(9,X,3,0,"div",8),e.k0s(),e.DNE(10,J,2,2),e.j41(11,"div",9),e.bIt("click",function(){return o.onPreview()}),e.k0s()(),e.j41(12,"div",10)(13,"div",11)(14,"div",12),e.bIt("click",function(){return o.onOpenMovie()}),e.EFF(15),e.k0s(),e.j41(16,"div",13),e.bIt("click",function(){return o.goToYear(o.getYear(o._movie.releaseDate))}),e.EFF(17),e.nI1(18,"releaseYear"),e.k0s()()()()),2&a&&(e.Y8G("ngStyle",e.eq3(18,k,o._cardWidth)),e.R7$(),e.FCK("title","",o.movie.title," (",e.bMT(2,14,o.movie.releaseDate),")"),e.Y8G("ngStyle",e.l_i(20,F,"calc(1.45 *"+o._cardWidth+")","url(https://image.tmdb.org/t/p/w185"+o._movie.posterPath+")")),e.R7$(3),e.Y8G("ngIf",!o.isProcessingBookmark),e.R7$(),e.Y8G("ngIf",o.isProcessingBookmark),e.R7$(),e.Y8G("ngIf",o._library&&o._library.id),e.R7$(2),e.Y8G("ngIf",!o.isProcessingFavorite),e.R7$(),e.Y8G("ngIf",o.isProcessingFavorite),e.R7$(),e.vxM(10,o.isFeatureEnabled("played_status")?10:-1),e.R7$(4),e.FS9("title",o._movie.title),e.R7$(),e.SpI(" ",o._movie.title," "),e.R7$(2),e.SpI(" ",e.bMT(18,16,o._movie.releaseDate)," "))},dependencies:[m.bT,m.B3,y.LG,P.nO],styles:[".movie-card[_ngcontent-%COMP%]{margin:5px 8px!important;outline:none;background:transparent;border:none}.movie-card-image-container[_ngcontent-%COMP%]{border-radius:12px;background-size:cover;background-position:center;position:relative;overflow:hidden;cursor:pointer;transition:transform .2s ease-in-out}.movie-card-image-container[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.movie-card-body[_ngcontent-%COMP%]{padding:8px 0 0!important}.movie-card-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.movie-card-title[_ngcontent-%COMP%]{color:#fff!important;font-weight:500;font-size:.95rem;margin-bottom:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.movie-card-title[_ngcontent-%COMP%]:hover{color:#007bff!important}.movie-year[_ngcontent-%COMP%]{color:#888;font-size:.85rem;cursor:pointer}.movie-year[_ngcontent-%COMP%]:hover{color:#ccc}.card-button[_ngcontent-%COMP%]{text-align:center;position:absolute;cursor:pointer;background-color:#000000b3;height:30px;width:30px;display:none;z-index:3;border-radius:50%;align-items:center;justify-content:center;transition:background-color .2s}.card-button[_ngcontent-%COMP%]:hover{background-color:#000000e6}.card-button-icon[_ngcontent-%COMP%]{filter:invert(1);width:18px;height:18px;cursor:pointer;background-size:cover}.movie-card-image-container[_ngcontent-%COMP%]:hover   .card-button[_ngcontent-%COMP%]{display:flex}.movie-bookmark[_ngcontent-%COMP%]{top:8px;right:8px}.movie-mark-favorite[_ngcontent-%COMP%]{top:44px;right:8px}.movie-mark-as-watched[_ngcontent-%COMP%]{top:80px;right:8px}.movie-highlight[_ngcontent-%COMP%]{position:absolute;top:5%;right:5%;height:15px;width:15px;z-index:3}.movie-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0%;left:0%;height:3px;width:100%;background-color:#ff3e04;z-index:3}.movie-available[_ngcontent-%COMP%]{position:absolute;top:5%;right:5%;height:15px;width:15px;background-color:#08b908;border-radius:50%;box-shadow:0 0 10px #38ec14;z-index:3}.bookmark-add[_ngcontent-%COMP%]{background-image:url(/../../../../assets/icons/bookmark-add.svg);filter:invert(1)}.bookmark-remove[_ngcontent-%COMP%]{background-image:url(/../../../../assets/icons/bookmark-minus.svg);filter:invert(1)}.favorite-add[_ngcontent-%COMP%]{background-image:url(/../../../../assets/icons/heart.svg);filter:invert(1)}.button-added[_ngcontent-%COMP%]{background-image:url(/../../../../assets/icons/check.svg)}.bookmark-icon[_ngcontent-%COMP%]{background-image:url(/../../../../assets/icons/bookmark-add.svg)}.favorite-icon[_ngcontent-%COMP%]{background-image:url(/../../../../assets/icons/heart.svg)}.favorite-icon[_ngcontent-%COMP%]:hover, .favorite-icon[_ngcontent-%COMP%]:focus{filter:invert(27%) sepia(51%) saturate(2878%) hue-rotate(346deg) brightness(104%) contrast(97%)}.bookmark-icon[_ngcontent-%COMP%]:hover, .bookmark-icon[_ngcontent-%COMP%]:focus{filter:invert(27%) sepia(51%) saturate(2878%) hue-rotate(212deg) brightness(104%) contrast(97%)}"]})}}return i})(),Z=(()=>{class i{constructor(){this.cardWidth="130px"}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-movie-card-skeleton"]],inputs:{cardWidth:"cardWidth"},decls:4,vars:2,consts:[[1,"movie-card-skeleton"],[1,"poster-skeleton"],[1,"title-skeleton"],[1,"year-skeleton"]],template:function(a,o){1&a&&(e.j41(0,"div",0),e.nrm(1,"div",1)(2,"div",2)(3,"div",3),e.k0s()),2&a&&e.xc7("width",o.cardWidth)},styles:[".movie-card-skeleton[_ngcontent-%COMP%]{margin:5px 8px;display:flex;flex-direction:column;gap:8px}.poster-skeleton[_ngcontent-%COMP%]{width:100%;aspect-ratio:1/1.45;background:linear-gradient(90deg,#1a1a1a 25%,#2a2a2a,#1a1a1a 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_shimmer 1.5s infinite;border-radius:12px}.title-skeleton[_ngcontent-%COMP%]{height:16px;width:80%;background:#1a1a1a;border-radius:4px}.year-skeleton[_ngcontent-%COMP%]{height:12px;width:40%;background:#1a1a1a;border-radius:4px}@keyframes _ngcontent-%COMP%_shimmer{0%{background-position:200% 0}to{background-position:-200% 0}}"]})}}return i})();const q=()=>[1,2,3,4,5,6,7,8];function ee(i,d){if(1&i&&(e.j41(0,"div"),e.nrm(1,"app-movie-card-skeleton",4),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.Y8G("cardWidth",t.cardWidth)}}function te(i,d){1&i&&(e.qex(0),e.DNE(1,ee,2,1,"div",3),e.bVm()),2&i&&(e.R7$(),e.Y8G("ngForOf",e.lJ4(1,q)))}function ie(i,d){if(1&i&&(e.j41(0,"div",6),e.nrm(1,"app-movie-card",7),e.k0s()),2&i){const t=d.$implicit,a=e.XpG(2);e.R7$(),e.Y8G("movie",t.movie)("cardWidth",a.cardWidth)("library",null)("userData",t.userData)}}function re(i,d){if(1&i&&e.DNE(0,ie,2,4,"div",5),2&i){const t=e.XpG();e.Y8G("ngForOf",t.movieAndUserDataList)}}let oe=(()=>{class i{set movieList(t){this.movieAndUserDataList=[],t&&t.forEach(a=>{this.movieAndUserDataList.push({movie:a,userData:null})}),this._movieList=t}get movieList(){return this._movieList}constructor(t,a){this.mediaUserDataService=t,this.featureToggleService=a,this.displayMode="card-list-horizontal",this.loading=!1,this.movieAndUserDataList=[]}ngOnInit(){this.renderHighlight(),this.getMoviesUserData()}ngOnChanges(t){console.log("changes",t)}getMoviesUserData(){const t=this.collectIds(),o=this.createDividedList(t,t.length);for(let l=0;l<o.length;l++){const f=o[l];"none"===this.listType?this.mediaUserDataService.getMediaUserDataMultiple(f).subscribe(p=>{x.isEmpty(p)||(this.featureToggleService.isEnabled("springMode")?this.movieAndUserDataList.forEach(_=>{const D=p.find(L=>_.movie.tmdbId===L.tmdbId);_.userData=D}):p.forEach(_=>{this.movieAndUserDataList.forEach(D=>{const L=p.find(B=>D.movie.tmdbId===B.tmdbId);D.userData=L})}))}):("bookmark"!==this.listType&&this.mediaUserDataService.getMediaDataPaginated(f).subscribe(p=>{this.curateUserData("bookmark",p)}),"watched"!==this.listType&&this.mediaUserDataService.getMediaDataPaginated(f).subscribe(p=>{this.curateUserData("watched",p)}),"library"!==this.listType&&this.mediaUserDataService.getMediaDataPaginated(f).then(p=>{this.curateUserData("library",p)}))}}curateUserData(t,a){const o=[];a.forEach(l=>{const f=l,p=f.tmdbId,_=f.title,D=f.year;let L;switch(t){case"bookmark":L={id:l.id?l.id:"",tmdbId:p||0,title:_||"",year:D||0};break;case"watched":L={id:l.id?l.id:"",tmdbId:p||0,title:_||"",year:D?parseInt(D,10):0,percentage:f.percentage?f.percentage:100};break;case"video":L={id:l.id,tmdbId:f.tmdbId,videoUrl:f.fullFilePath}}o.push(L)}),this.movieList.forEach(l=>{o.forEach(f=>{f.tmdbId===l.id&&(l[t]=f)})})}renderHighlight(){}collectIds(){const t=[];return this.movieList.forEach(a=>{t.push(a.tmdbId)}),t}createDividedList(t,a){const o=[];let l,p=0;for(let _=0;_<a;_+=20)l=t.slice(_,_+20),o[p]=l,p++;return o}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(M.L),e.rXU(C.I))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-card-list"]],inputs:{cardWidth:"cardWidth",displayMode:"displayMode",listType:"listType",loading:"loading",movieList:"movieList"},features:[e.OA$],decls:4,vars:3,consts:[["content",""],[3,"ngClass"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"cardWidth"],["id","results-panel",4,"ngFor","ngForOf"],["id","results-panel"],[3,"movie","cardWidth","library","userData"]],template:function(a,o){if(1&a&&(e.j41(0,"div",1),e.DNE(1,te,2,2,"ng-container",2)(2,re,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&a){const l=e.sdS(3);e.Y8G("ngClass",o.displayMode),e.R7$(),e.Y8G("ngIf",o.loading)("ngIfElse",l)}},dependencies:[m.YU,m.Sq,m.bT,Q,Z],styles:[".card-list-horizontal[_ngcontent-%COMP%]{display:flex;overflow-x:auto;overflow-y:hidden;gap:16px;padding:10px 0;width:100%}.card-list-horizontal[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.card-list-horizontal[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.card-list-horizontal[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#333;border-radius:3px}.card-list-horizontal[_ngcontent-%COMP%]   #results-panel[_ngcontent-%COMP%]{flex:0 0 auto}.movie-cards-display-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;justify-content:center}"]})}}return i})()}}]);