"use strict";(self.webpackChunkmdb_electron=self.webpackChunkmdb_electron||[]).push([[663],{7663:(T,v,r)=>{r.r(v),r.d(v,{PreferencesModule:()=>A});var m=r(177),F=r(2791),h=r(1413),y=r(9762),c=r(1891),g=r(6977),f=r(1356),e=r(4438),s=r(9417),p=r(1997),M=r(9213),d=r(4823),u=r(1229),C=r(5551),b=r(2102),k=r(7250),R=r(6600);function U(n,j){if(1&n&&(e.j41(0,"mat-option",4),e.EFF(1),e.k0s()),2&n){const t=j.$implicit;e.Y8G("value",t.value),e.R7$(),e.SpI(" ",t.label," ")}}function V(n,j){if(1&n&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.error||"Invalid selection"," ")}}let G=(()=>{class n{constructor(t){this.controlDir=t,this.label="",this.options=[],this.multiple=!1,this.error="",this.value="",this.isDisabled=!1,this.onChange=()=>{},this.onTouched=()=>{},this.controlDir&&(this.controlDir.valueAccessor=this)}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}onSelectionChange(t){this.value=t.value,this.onChange(this.value),this.onTouched()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(s.vO,10))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["mdb-select"]],inputs:{label:"label",options:"options",multiple:"multiple",error:"error"},decls:6,vars:6,consts:[["appearance","outline",1,"w-100","mdb-select-field"],[3,"selectionChange","value","multiple","disabled"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"]],template:function(i,o){1&i&&(e.j41(0,"mat-form-field",0)(1,"mat-label"),e.EFF(2),e.k0s(),e.j41(3,"mat-select",1),e.bIt("selectionChange",function(a){return o.onSelectionChange(a)}),e.DNE(4,U,2,2,"mat-option",2),e.k0s(),e.DNE(5,V,2,1,"mat-error",3),e.k0s()),2&i&&(e.R7$(2),e.JRh(o.label),e.R7$(),e.Y8G("value",o.value)("multiple",o.multiple)("disabled",o.isDisabled),e.R7$(),e.Y8G("ngForOf",o.options),e.R7$(),e.Y8G("ngIf",(null==o.controlDir||null==o.controlDir.control?null:o.controlDir.control.invalid)&&(null==o.controlDir||null==o.controlDir.control?null:o.controlDir.control.touched)))},dependencies:[m.Sq,m.bT,b.rl,b.nJ,b.TL,k.VO,R.wT],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})}}return n})();var S=r(2765);let I=(()=>{class n{constructor(t){this.controlDir=t,this.label="",this.checked=!1,this.isDisabled=!1,this.onChange=()=>{},this.onTouched=()=>{},this.controlDir&&(this.controlDir.valueAccessor=this)}writeValue(t){this.checked=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.isDisabled=t}onCheckboxChange(t){this.checked=t.checked,this.onChange(this.checked),this.onTouched()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(s.vO,10))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["mdb-checkbox"]],inputs:{label:"label"},decls:2,vars:3,consts:[["color","primary",3,"change","checked","disabled"]],template:function(i,o){1&i&&(e.j41(0,"mat-checkbox",0),e.bIt("change",function(a){return o.onCheckboxChange(a)}),e.EFF(1),e.k0s()),2&i&&(e.Y8G("checked",o.checked)("disabled",o.isDisabled),e.R7$(),e.SpI(" ",o.label,"\n"))},dependencies:[S.So],styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return n})();var L=r(7533);function N(n,j){if(1&n){const t=e.RV6();e.j41(0,"li",74)(1,"a",75),e.bIt("click",function(){const o=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.onGoToFolder(o))}),e.j41(2,"mat-icon",76),e.EFF(3,"folder"),e.k0s(),e.EFF(4),e.k0s(),e.nrm(5,"mdb-checkbox",77),e.k0s()}if(2&n){const t=j.$implicit;e.R7$(4),e.SpI(" ",t," ")}}const _=[{path:"",component:(()=>{class n{constructor(t,i,o){this.formBuilder=t,this.ipcService=i,this.preferencesService=o,this.initialFolder="C:\\",this.testFoldersList=["folder1","folder2"],this.testLibraryFolders=["C:\\Users\\","D:\\Movies"],this.testCurrentFolder="D:'",this.title="angular 4 with jquery",this.libraryMovies=[],this.libraryFolders=this.testLibraryFolders,this.foldersList=this.testFoldersList,this.currentFolder=this.initialFolder,this.previousFolder="",this.DEFAULT_LANGUAGE="en",this.languagesOptions=c.wX,this.frequencyOptions=c.cy,this.fontSizeOptions=c.X5,this.colorOptions=c.Re,this.qualityOptions=c.p3,this.modeOptions=c.R7,this.ngUnsubscribe=new h.B,console.log("preferences constructor")}ngOnInit(){console.log("preferences oninit"),this.preferencesForm=this.formBuilder.group({autoScan:[!0,[]],darkMode:[!0,[]],enableCache:[!1,[]],language:["en",[]],username:[!0,[]],scanFreqValue:[1,[]],scanFreqUnit:["min",[]],fontColor:["min",[]],fontSize:["min",[]],fontOpacity:["min",[]],fontFamily:["min",[]],backgroundColor:["min",[]]},{}),this.preferencesForm.valueChanges.subscribe(t=>{console.log(t)}),this.ipcService.getFiles().then(t=>{console.log("getFiles",t)}).catch(t=>{console.log(t)}),this.ipcService.getSystemDrives().then(t=>{console.log("gotsystemdrives",t)}).catch(t=>{console.log(t)}),this.preferencesObject=this.preferencesService.getPreferences(),this.ipcService.getPreferences().pipe((0,g.Q)(this.ngUnsubscribe)).subscribe(t=>{console.log("this.ipcService.preferences ",t),this.preferencesObject=t})}ngOnDestroy(){this.ngUnsubscribe.complete()}toggleTitle(){}setFoldersList(){}onGetLibraryFolders(){}onOpenModal(){this.onGoToFolder(this.initialFolder),this.ipcService.getSystemDrives()}onCloseModal(){this.previousFolder=""}onScanLibrary(){this.ipcService.startScanLibrary()}onStopScanLibrary(){console.log("onStopScanLibrary"),this.ipcService.stopScanLibrary()}onUpdateTorrentDump(){}onUpdateOfflineMetadata(){}onSyncUserData(){}onSave(){this.preferencesService.savePreferences(this.preferencesObject)}onReset(){this.preferencesObject=c.dx,this.isDirty=!1}onAddFolder(t){this.ipcService.openFolder("")}onEditFolder(t){}onDeleteFolder(t){this.libraryFolders=this.libraryFolders.filter(i=>i!==t)}onOpenFolder(t){let i="";const o=new RegExp(c.vz,"gi");i=null==t.match(o)?this.currentFolder+t:t}onGoToPreviousFolder(t){this.previousFolder&&(this.ipcService.openFolder(t),this.currentFolder=this.previousFolder)}onGoToParentFolder(){this.currentFolder.lastIndexOf("\\")<=2||(this.previousFolder=this.currentFolder)}onGoToFolder(t){this.previousFolder=this.currentFolder,this.currentFolder=t,this.ipcService.openFolder(t)}onValChange(t){console.log("pref e ",t)}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(s.ok),e.rXU(y.Uj),e.rXU(f.W))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-preferences"]],decls:139,vars:12,consts:[["currentFolderTextbox",""],[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"mat-h1","m-0"],[1,"d-flex","gap-2"],["variant","outline",3,"onClick","disabled"],["variant","primary",3,"onClick"],[3,"formGroup"],[1,"row","g-4"],[1,"col-md-6","d-flex","flex-column","gap-4"],["title","General"],["label","Dark Mode","formControlName","darkMode",1,"d-block","mb-3"],["label","Enable Cache","formControlName","enableCache",1,"d-block","mb-3"],[1,"d-flex","align-items-center","justify-content-between","mt-2"],["variant","outline","size","sm"],["title","Library"],["header-actions",""],["matTooltip","Manage your movie folders",1,"ms-auto"],[1,"d-flex","gap-2","flex-wrap","mb-3"],["variant","secondary","icon","add","data-toggle","modal","data-target","#addLibraryModal",3,"onClick"],["variant","outline","icon","refresh",3,"onClick"],["variant","danger","icon","stop",3,"onClick"],[1,"mb-3"],[1,"mat-h3","mt-2"],["label","Enable Auto-scan","formControlName","autoScan",1,"d-block","mb-3"],[1,"row"],[1,"col-6"],["label","Value","formControlName","scanFreqValue","type","number"],["label","Unit","formControlName","scanFreqUnit",3,"options"],[1,"mt-3"],["label","Download speed (bps)","formControlName","autoScan","type","number"],["title","Offline Data"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mat-h4","m-0"],[1,"text-muted"],["variant","outline","size","sm",3,"onClick"],[1,"mb-2"],[1,"d-flex","justify-content-between","align-items-center"],["title","Playback"],["label","Preferred Quality","formControlName","autoScan",1,"mb-3",3,"options"],["label","Preferred Mode","formControlName","autoScan",1,"mb-3",3,"options"],[1,"col-md-12"],[1,"my-3"],[1,"mat-h4"],[1,"col-6","mb-3"],["label","Color","formControlName","fontColor",3,"options"],["label","Size","formControlName","fontSize",3,"options"],["label","Opacity","formControlName","fontOpacity",3,"options"],["label","Font Family","formControlName","fontFamily",3,"options"],[1,"col-12"],["label","Background Color","formControlName","backgroundColor",3,"options"],["title","Statistics"],["matTooltip","System stats"],[1,"table","table-borderless","text-white-50","m-0"],[1,"text-end","text-white"],["id","addLibraryModal","role","dialog",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content","bg-dark","text-white"],[1,"modal-header","border-bottom","border-secondary"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"close","text-white",3,"click"],[1,"modal-body"],[1,"d-flex","gap-2","mb-3"],["variant","secondary","size","sm",3,"onClick"],["type","text","disabled","",1,"form-control","bg-secondary","text-white","border-0",3,"ngModelChange","ngModel"],[1,"row","g-0","border","border-secondary","rounded","overflow-hidden"],[1,"col-4","bg-secondary","p-3"],[1,"text-uppercase","text-white-50","fs-6"],[1,"text-white-50","small"],[1,"col-8","bg-dark","p-3"],[1,"list-unstyled"],["class","d-flex align-items-center justify-content-between py-1 border-bottom border-secondary",4,"ngFor","ngForOf"],[1,"modal-footer","border-top","border-secondary"],["variant","outline","data-dismiss","modal"],[1,"d-flex","align-items-center","justify-content-between","py-1","border-bottom","border-secondary"],[1,"text-white","text-decoration-none","pointer",2,"cursor","pointer",3,"click"],[1,"align-middle","me-2","fs-6"],["color","primary"]],template:function(i,o){if(1&i){const l=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h1",3),e.EFF(3,"Preferences"),e.k0s(),e.j41(4,"div",4)(5,"mdb-button",5),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onReset())}),e.EFF(6,"Reset"),e.k0s(),e.j41(7,"mdb-button",6),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onSave())}),e.EFF(8,"Save Changes"),e.k0s()()(),e.j41(9,"form",7)(10,"div",8)(11,"div",9)(12,"mdb-card",10),e.nrm(13,"mdb-checkbox",11)(14,"mdb-checkbox",12),e.j41(15,"div",13)(16,"span"),e.EFF(17,"System Update"),e.k0s(),e.j41(18,"mdb-button",14),e.EFF(19,"Check Shortcuts"),e.k0s()()(),e.j41(20,"mdb-card",15)(21,"div",16)(22,"mat-icon",17),e.EFF(23,"folder"),e.k0s()(),e.j41(24,"div",18)(25,"mdb-button",19),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onOpenModal())}),e.EFF(26,"Add Folder"),e.k0s(),e.j41(27,"mdb-button",20),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onScanLibrary())}),e.EFF(28,"Scan Library"),e.k0s(),e.j41(29,"mdb-button",21),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onStopScanLibrary())}),e.EFF(30,"Stop Scan"),e.k0s()(),e.nrm(31,"mat-divider",22),e.j41(32,"h3",23),e.EFF(33,"Auto-scan"),e.k0s(),e.nrm(34,"mdb-checkbox",24),e.j41(35,"div",25)(36,"div",26),e.nrm(37,"mdb-input",27),e.k0s(),e.j41(38,"div",26),e.nrm(39,"mdb-select",28),e.k0s()(),e.j41(40,"div",29),e.nrm(41,"mdb-input",30),e.k0s()(),e.j41(42,"mdb-card",31)(43,"div",32)(44,"div")(45,"h4",33),e.EFF(46,"Torrent Dump"),e.k0s(),e.j41(47,"small",34),e.EFF(48,"Last update: Jan 1, 1970"),e.k0s()(),e.j41(49,"mdb-button",35),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onUpdateTorrentDump())}),e.EFF(50,"Update"),e.k0s()(),e.nrm(51,"mat-divider",36),e.j41(52,"div",32)(53,"div")(54,"h4",33),e.EFF(55,"Metadata"),e.k0s(),e.j41(56,"small",34),e.EFF(57,"Last update: Jan 1, 1970"),e.k0s()(),e.j41(58,"mdb-button",35),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onUpdateOfflineMetadata())}),e.EFF(59,"Update"),e.k0s()(),e.nrm(60,"mat-divider",36),e.j41(61,"div",37)(62,"div")(63,"h4",33),e.EFF(64,"User Data"),e.k0s(),e.j41(65,"small",34),e.EFF(66,"Sync profile across devices"),e.k0s()(),e.j41(67,"mdb-button",35),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onSyncUserData())}),e.EFF(68,"Sync"),e.k0s()()()(),e.j41(69,"div",9)(70,"mdb-card",38),e.nrm(71,"mdb-select",39)(72,"mdb-select",40),e.j41(73,"div",25)(74,"div",41),e.nrm(75,"mat-divider",42),e.j41(76,"h4",43),e.EFF(77,"Subtitle Appearance"),e.k0s()(),e.j41(78,"div",44),e.nrm(79,"mdb-select",45),e.k0s(),e.j41(80,"div",44),e.nrm(81,"mdb-select",46),e.k0s(),e.j41(82,"div",44),e.nrm(83,"mdb-select",47),e.k0s(),e.j41(84,"div",44),e.nrm(85,"mdb-select",48),e.k0s(),e.j41(86,"div",49),e.nrm(87,"mdb-select",50),e.k0s()()(),e.j41(88,"mdb-card",51)(89,"div",16)(90,"mat-icon",52),e.EFF(91,"analytics"),e.k0s()(),e.j41(92,"table",53)(93,"tbody")(94,"tr")(95,"td"),e.EFF(96,"Library Size"),e.k0s(),e.j41(97,"td",54),e.EFF(98,"21 GB"),e.k0s()(),e.j41(99,"tr")(100,"td"),e.EFF(101,"Movies Count"),e.k0s(),e.j41(102,"td",54),e.EFF(103,"30"),e.k0s()(),e.j41(104,"tr")(105,"td"),e.EFF(106,"System Up Time"),e.k0s(),e.j41(107,"td",54),e.EFF(108,"2d 4h"),e.k0s()()()()()()()()(),e.j41(109,"div",55)(110,"div",56)(111,"div",57)(112,"div",58)(113,"h4",59),e.EFF(114,"Manage Library Folders"),e.k0s(),e.j41(115,"button",60),e.bIt("click",function(){return e.eBV(l),e.Njj(o.onCloseModal())}),e.EFF(116,"\xd7"),e.k0s()(),e.j41(117,"div",61)(118,"div",62)(119,"mdb-button",63),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onGoToParentFolder())}),e.EFF(120,"Up"),e.k0s(),e.j41(121,"input",64,0),e.mxI("ngModelChange",function(E){return e.eBV(l),e.DH7(o.currentFolder,E)||(o.currentFolder=E),e.Njj(E)}),e.k0s()(),e.j41(123,"div",65)(124,"div",66)(125,"h6",67),e.EFF(126,"Drives"),e.k0s(),e.j41(127,"div",68),e.EFF(128,"C: (System)"),e.k0s()(),e.j41(129,"div",69)(130,"h6",67),e.EFF(131,"Folders"),e.k0s(),e.j41(132,"ul",70),e.DNE(133,N,6,1,"li",71),e.k0s()()()(),e.j41(134,"div",72)(135,"mdb-button",73),e.EFF(136,"Cancel"),e.k0s(),e.j41(137,"mdb-button",6),e.bIt("onClick",function(){return e.eBV(l),e.Njj(o.onSave())}),e.EFF(138,"Add Selected"),e.k0s()()()()()}2&i&&(e.R7$(5),e.Y8G("disabled",!o.isDirty),e.R7$(4),e.Y8G("formGroup",o.preferencesForm),e.R7$(30),e.Y8G("options",o.frequencyOptions),e.R7$(32),e.Y8G("options",o.qualityOptions),e.R7$(),e.Y8G("options",o.modeOptions),e.R7$(7),e.Y8G("options",o.colorOptions),e.R7$(2),e.Y8G("options",o.fontSizeOptions),e.R7$(2),e.Y8G("options",o.frequencyOptions),e.R7$(2),e.Y8G("options",o.frequencyOptions),e.R7$(2),e.Y8G("options",o.colorOptions),e.R7$(34),e.R50("ngModel",o.currentFolder),e.R7$(12),e.Y8G("ngForOf",o.foldersList))},dependencies:[m.Sq,s.qT,s.me,s.BC,s.cb,s.vS,s.j4,s.JD,p.q,M.An,d.oV,u.Q,C.S,G,I,L.i],styles:["a[_ngcontent-%COMP%]:hover{cursor:pointer}.grid-container[_ngcontent-%COMP%]{display:grid;grid-column-gap:10px;grid-template-columns:auto auto;padding:50px}.grid-item[_ngcontent-%COMP%]{background-color:#fffc;border:1px solid rgba(0,0,0,.8);padding:20px;text-align:center}mat-divider[_ngcontent-%COMP%]{border-top-color:#fff}"]})}}return n})()}];let B=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[F.iI.forChild(_),F.iI]})}}return n})();var O=r(6523),D=r(5351),P=r(9631);let $=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({providers:[{provide:"formState",useValue:null},{provide:"validatorOrOpts",useValue:null},{provide:"asyncValidator",useValue:null}],imports:[m.MD,s.YN,s.X1,O.G,b.RG,P.fS,k.Ve,D.hM,S.g7]})}}return n})();var x=r(5596);let A=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[m.MD,$,s.YN,s.X1,B,O.G,b.RG,P.fS,k.Ve,D.hM,S.g7,x.Hu]})}}return n})()},1356:(T,v,r)=>{r.d(v,{W:()=>s});var m=r(4412),F=r(1413),h=r(1891),y=r(9762),c=r(6977),g=r(8141),f=r(4438),e=r(9211);let s=(()=>{class p{constructor(d,u){this.ipcService=d,this.loggerService=u,this.isGetTorrentFromMovieCard=!1,this.preferencesV2=new m.t(h.dx),this.ngUnsubscribe=new F.B,this.getPreferencesFromDb().pipe((0,c.Q)(this.ngUnsubscribe)).subscribe(C=>{this.loggerService.info(`this.ipcService.preferences  ${JSON.stringify(C)}`),this.preferencesV2.next(C)})}pullPreferences(){}getPreferences(){return this.preferencesV2||this.preferencesV2.next(h.dx),this.preferencesV2.value}getPreferencesFromDb(){return this.ipcService.getPreferences()}savePreferences(d){return this.ipcService.savePreferences(d).pipe((0,g.M)(u=>{this.preferencesV2.next(u)}))}resetPreferences(){return this.ipcService.savePreferences(h.dx).pipe((0,g.M)(d=>{this.preferencesV2.next(d)}))}static{this.\u0275fac=function(u){return new(u||p)(f.KVO(y.Uj),f.KVO(e.g))}}static{this.\u0275prov=f.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()}}]);